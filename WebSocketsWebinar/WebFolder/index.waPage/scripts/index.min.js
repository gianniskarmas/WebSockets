WAF.onAfterInit=function(){var b={},c={},d={},e={},f=new WebSocket("ws://ks27964.kimsufi.com:8081/chat"),g="";f.onmessage=function(a){var b=JSON.parse(a.data);switch(b.type){case"addUser":g=b.username,$$("usernameInput").setValue(g);break;case"message":var c=$$("chatText").getValue();$$("chatText").setValue("<b>"+b.username+":</b> "+b.body+"</br>"+c);break;case"slider":$$("messageInput").setWidth(b.lala)}},f.onclose=function(){},b.keydown=function(b){if(b.keyCode=13)f.send(JSON.stringify({username:g,type:"message",body:$$("messageInput").getValue()})),$$("messageInput").setValue("")},c.slide=function(b){f.send(JSON.stringify({type:"slide",body:$$("slider1").getValue()}))},d.click=function(b){f.send(JSON.stringify({username:g,type:"message",body:$$("messageInput").getValue()})),$$("messageInput").setValue("")},e.click=function(b){g=$$("usernameInput").getValue(),f.send(JSON.stringify({username:g,type:"updateUsername"}))},WAF.addListener("messageInput","keydown",b.keydown,"WAF"),WAF.addListener("slider1","slide",c.slide,"WAF"),WAF.addListener("sendButton","click",d.click,"WAF"),WAF.addListener("changeUsernameButton","click",e.click,"WAF")}